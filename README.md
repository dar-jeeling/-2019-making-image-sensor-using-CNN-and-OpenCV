# making image sensor using CNN, OpenCV
2019년에 진행했던 CNN과 openCV를 이용한 이미지 센서 만들기 프로젝트 입니다.
첫번째는 반도체 박막의 코팅 상태를 non-conformal과 conforaml로 판단합니다.
두번째는 나사의 이미지를 가지고 openCV로 길이를 측정한 후, 나사의 길이에 따라 아두이노를 이용하여 나사를 다시 조여줍니다.
2년 전에 진행했던 프로젝트이기 때문에, 코드 중 일부가 현재 시점에서 유실되었고 현재 쓰고 있는 글도 기억에 의존해서 쓰고 있기 때문에 부정확한 정보가 있을 수도 있습니다ㅠㅠ...
코드의 대부분은 오픈소스를 참고한 코드입니다.

(유실된 코드)
- ImageGenerator를 이용하여 이미지의 양을 늘리는 부분
- python 코드와 아두이노를 연동하는 부분

소스 코드의 경우, 아래 소스를 참고하였습니다.
(참고한 소스)
- https://lsjsj92.tistory.com/357 (Keras를 이용한 개,고양이 분류)
- http://cocoding94.blogspot.com/2017/05/blog-post_7.html (openCV를 이용한 발 사이즈 분석)

Semiconductor Deposition Classfication with CNN
 
 * 첨부된 소스의 이미지 파일의 경로와 파일의 디렉토리 이름이 달라졌기 때문에, 그대로 코드를 작동할 경우 코드가 작동되지 않습니다.


(프로젝트 동기)
 반도체 박막의 증착 과정 중 모양이 conformal한 경우에는 정상 기계가 작동하지만, non-conformal 한 경우에는 정상적으로 작동하지 않을 가능성이 높음.

 ![conuncon](https://user-images.githubusercontent.com/74234333/116227259-e8ed6a00-a78e-11eb-886a-653b28f473b0.JPG)

(a) conformal (b) non-conformal
(이미지 출처 : https://www.researchgate.net/figure/a-Conformal-deposition-b-Nonconformal-deposition_fig7_35492417)

(원리 및 방법)

 CNN을 이용하여 conformal한 이미지와 non-conformal한 이미지를 구분하여 binary로 학습을 시킴.
 위의 이미지를 대량으로 구하기 어려웠기 때문에 ImageGenerator를 사용하였음.
 
(어려웠던 점)

 - 이미지 데이터를 구하기 어려워서 ImageGenerator를 사용하였으나, 이미지의 갯수가 극소수(6개...)였기 때문에
 정확한 센서를 만들기 어려웠음.
 - 적은 데이터로 학습을 시켰기때문에 비정상적인 정확도가 만들어짐
 - 따라서, 차선책으로 unconformal한 cell의 모양과 conformal한 cell의 모양을 직접 그려서 사용하려고 하였으나,
이미지를 pixel단위로 처리하는 CNN의 특성 상 유의미한 결과를 만들어내지 못하였음.

Mesuring Volt's Length with OpenCV

(프로젝트 동기)
 산업 현장에서 기체를 보관할 경우, 기체의 압력이 열에 따라 증가하는 폭이 크기 때문에 나사가 풀려서 사고가 일어나는 일이 많다고 합니다.
 보통 초음파 센서를 사용하여 이를 판별해내지만, 초음파 센서의 경우 외부의 개입으로 인하여 결과가 불확실해질 가능성이 있기 때문에
 이미지 센서를 제작하고자 함.
 
(원리 및 방법)
 나사의 이미지를 가지고 OpenCV를 이용하여 저점과 고점을 파악합니다.
 정확한 결과를 파악하기 위하여 뒤의 흰 바탕과 나사만 추출하는 보정을 한번 거쳤습니다.
 그 이후 나사의 저점과 고점을 측정한 아두이노와 연동 후, 특정 길이 이상일 경우 모터와 드라이버를 연결하여 나사를 다시 조여주는 원리입니다.
 
(어려웠던 점)
- 고점과 저점을 찾는 일 자체가 힘들었습니다. 직접 눈으로 보고 계산하는 방법을 사용했는데, 눈으로 하다보니깐 오차가 많이 발생하였습니다.

<총평>
 아직 코딩의 세계로 들어가지 않았을 때, 하던 프로젝트라서 코드를 직접 작성하기 보다는 오픈소스에 의존하였다는 점이 아쉽습니다.
 따라서 둘 모두 원하는 결과를 얻기 힘들었고 코드 레밸의 접근이 필요하다는 것을 많이 실감하였습니다.
 하지만 이 프로젝트를 통하여 코드의 세계에 빠져들을 수 있던 계기가 되었습니다.
